@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================== */
/* Tokens (Light / Dark) */
/* ===================== */
:root {
  /* Font stacks (usam variáveis do Geist, se presentes via layout) */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New";

  color-scheme: light dark;
  accent-color: hsl(27 100% 50%);

  /* Aliases shadcn (HSL components) */
  --background: 0 0% 100%;
  --foreground: 240 5% 10%;
  --muted-hsl: 240 5% 96%;
  --border-hsl: 240 6% 84%;
  --ring-hsl: 240 5% 65%;

  /* Aliases funcionais */
  --bg: hsl(0 0% 100%);
  --fg: hsl(240 5% 10%);
  --muted: hsl(240 5% 96%);
  --muted-2: hsl(240 5% 90%);
  --border: hsl(240 6% 84%);
  --ring: hsl(240 5% 65%);

  /* Yello gradient */
  --yello-1: hsl(45 100% 62%);
  --yello-2: hsl(27 100% 50%);
  --yello-3: hsl(342 100% 56%);
  --yello-grad: linear-gradient(135deg, var(--yello-1) 0%, var(--yello-2) 45%, var(--yello-3) 100%);
  --yello-shadow: 0 10px 30px hsl(27 100% 50% / 0.25);

  /* Brand */
  --brand: hsl(45 100% 62%);
  --brand-accent: hsl(27 100% 50%);
  --brand-secondary: hsl(342 100% 56%);
  --brand-foreground: hsl(0 0% 100%);
  --brand-muted: hsl(45 100% 62% / 0.1);
  --brand-surface: hsl(45 100% 62% / 0.05);

  /* Glass & blur */
  --glass-bg: hsl(0 0% 100% / 0.08);
  --glass-bg-strong: hsl(0 0% 100% / 0.12);
  --glass-border: hsl(0 0% 100% / 0.18);
  --glass-bg-dark: hsl(240 10% 10% / 0.35);
  --glass-border-dark: hsl(240 10% 30% / 0.45);
  --blur: 12px;

  /* Radius token */
  --radius: 12px;
}

.dark {
  /* shadcn aliases (HSL) */
  --background: 240 10% 4%;
  --foreground: 0 0% 98%;
  --muted-hsl: 240 7% 11%;
  --border-hsl: 240 5% 26%;
  --ring-hsl: 240 5% 54%;

  /* funcionais */
  --bg: hsl(240 10% 4%);
  --fg: hsl(0 0% 98%);
  --muted: hsl(240 7% 11%);
  --muted-2: hsl(240 5% 16%);
  --border: hsl(240 5% 26%);
  --ring: hsl(240 5% 54%);

  --glass-bg: var(--glass-bg-dark);
  --glass-bg-strong: hsl(240 10% 10% / 0.55);
  --glass-border: var(--glass-border-dark);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: 240 10% 4%;
    --foreground: 0 0% 98%;
    --muted-hsl: 240 7% 11%;
    --border-hsl: 240 5% 26%;
    --ring-hsl: 240 5% 54%;

    --bg: hsl(240 10% 4%);
    --fg: hsl(0 0% 98%);
    --muted: hsl(240 7% 11%);
    --muted-2: hsl(240 5% 16%);
    --border: hsl(240 5% 26%);
    --ring: hsl(240 5% 54%);

    --glass-bg: var(--glass-bg-dark);
    --glass-bg-strong: hsl(240 10% 10% / 0.55);
    --glass-border: var(--glass-border-dark);
  }
}

html { font-feature-settings: "liga" 1; }
code, pre, kbd, samp { font-family: var(--font-geist-mono, var(--font-mono)); }

/* ============ */
/* Base Layer   */
/* ============ */
@layer base {
  :root {
    /* mapeia tokens shadcn → tailwind classes (bg-background, text-foreground, etc.) */
    --muted: hsl(var(--muted-hsl));
  }

  * { @apply border-border; }

  html, body {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    /* usa variáveis do Geist definidas no layout; fallback seguro */
    font-family: var(--font-geist-sans, var(--font-sans));
    /* fundo em camadas com Yello discreto */
    background-image:
      radial-gradient(at top right, hsl(45 100% 62% / 0.14), transparent 60%),
      radial-gradient(at bottom left, hsl(342 100% 56% / 0.12), transparent 60%);
    background-repeat: no-repeat;
    background-attachment: fixed;
    min-height: 100vh;
  }

  ::selection {
    /* cor sólida acessível (gradientes não são garantidos em selection) */
    background-color: hsl(27 100% 50% / 0.28);
    color: white;
  }

  /* Scrollbar discreta (WebKit) */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background-color: hsl(240 5% 65% / 0.4); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background-color: hsl(240 5% 65% / 0.6); }
}

/* =============== */
/* Utilities Layer */
/* =============== */
@layer utilities {
  /* Texto com gradiente Yello */
  .yello-gradient-text {
    background: var(--yello-grad);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Stroke gradiente 1–2px com máscara (respeita border-radius) */
  .yello-stroke,
  .yello-stroke-2 {
    --stroke-w: 1px;
    position: relative;
    border: var(--stroke-w) solid transparent;
    border-radius: inherit;
    background:
      var(--yello-grad) border-box,
      linear-gradient(var(--bg), var(--bg)) padding-box;
    -webkit-mask:
      linear-gradient(#000 0 0) padding-box,
      linear-gradient(#000 0 0) border-box;
    -webkit-mask-composite: xor;
            mask-composite: exclude;
  }
  .yello-stroke-2 { --stroke-w: 2px; }

  /* Ring de foco acessível com camada neutra + acento Yello */
  .focus-yello {
    outline: none;
    box-shadow:
      0 0 0 2px hsl(var(--background)),
      0 0 0 4px var(--yello-1);
  }
  .focus-yello:focus-visible {
    box-shadow:
      0 0 0 2px hsl(var(--background)),
      0 0 0 4px var(--yello-1),
      0 0 0 6px var(--yello-2);
  }

  /* Glass effects com fallback e respeito a prefers-reduced-transparency */
  .glass,
  .glass-strong,
  .glass-panel {
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
  }
  .glass-strong { background: var(--glass-bg-strong); }
  .glass-panel {
    background: var(--glass-bg);
    box-shadow: var(--yello-shadow);
  }
  @supports (backdrop-filter: blur(1px)) {
    .glass       { backdrop-filter: blur(var(--blur)); -webkit-backdrop-filter: blur(var(--blur)); }
    .glass-strong{ backdrop-filter: blur(calc(var(--blur)*1.2)); -webkit-backdrop-filter: blur(calc(var(--blur)*1.2)); }
    .glass-panel { backdrop-filter: blur(var(--blur)); -webkit-backdrop-filter: blur(var(--blur)); }
  }
  @media (prefers-reduced-transparency: reduce) {
    .glass, .glass-strong, .glass-panel { background: hsl(var(--background) / 0.9); }
  }

  /* Background helpers */
  .bg-yello-radial {
    background-image: radial-gradient(circle at 30% 20%, var(--yello-1), var(--yello-2), var(--yello-3));
  }
  .bg-yello-linear { background-image: var(--yello-grad); }
  .bg-noise { background-image: url('/noise.png'); }

  /* Aliases de cores Tailwind (para classes bg-background, text-foreground etc.) */
  .bg-background   { background-color: hsl(var(--background)); }
  .text-foreground { color: hsl(var(--foreground)); }
  .border-border   { border-color: hsl(var(--border-hsl)); }
  .ring-ring       { --tw-ring-color: hsl(var(--ring-hsl)); }

  /* Font utilities (com fallback seguro) */
  .font-geist { font-family: var(--font-geist-sans, var(--font-sans)); }
  .font-geist-mono { font-family: var(--font-geist-mono, var(--font-mono)); }
}
